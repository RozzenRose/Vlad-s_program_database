#база_данных #реляционные #SQL #СУБД #агрегатные_функции #AVG

---
Функция `AVG()` используется для вычисления среднего арифметического числовых значений поля. например, с помощью данной функции мы можем определить среднее количество прослушиваний всех песен
```
+----+-------+-------------------------+------------+---------+--------------+--------+
| id | place | trackname               | artist     | streams | release_year | length |
+----+-------+-------------------------+------------+---------+--------------+--------+
| 1  | 4     | Crazy on You            | Heart      | 303885  | 1976         | 254    |
| 2  | 7     | My Lover                | The Sounds | 211133  | 2009         | 266    |
| 3  | 3     | Running up That Hill    | Kate Bush  | 339583  | NULL         | 296    |
| 4  | 5     | Thrill                  | The Sounds | 294264  | 2016         | 228    |
| 5  | 9     | Spent the Day in Bed    | Morrissey  | 174994  | 2017         | 259    |
| 6  | 2     | Bigmouth Strikes Again  | The Smiths | 379112  | 1986         | 195    |
| 7  | 6     | Painted By Numbers      | The Sounds | 265121  | 2006         | 200    |
| 8  | 8     | Let Me Kiss You         | Morrissey  | 197426  | 2004         | 210    |
| 9  | 1     | Keep Yourself Alive     | Queen      | 385991  | NULL         | 235    |
| 10 | 10    | Everyday is Like Sunday | Morrissey  | 160404  | 1988         | 216    |
+----+-------+-------------------------+------------+---------+--------------+--------+
```
---
```MySQL
SELECT AVG(streams) AS avg_streams
FROM Songs;
```
```
+-------------+
| avg_streams |
+-------------+
| 271191.3000 |
+-------------+
```
Запрос выше возвращает единственное значение, соответствующее среднему количеству прослушиваний всех десяти песен. Дополнительно можно воспользоваться блоком `WHERE` и найти среднее значение на основе не всех значений поля, а лишь тех, что удовлетворяют определенным условиям.
```MySQL
SELECT AVG(streams) AS avg_streams
FROM Songs
WHERE release_year >= 2000;
```
```
+-------------+
| avg_streams |
+-------------+
| 228587.6000 |
+-------------+
```
В этом запросе выбираются только те записи, значение поля `release_year` которых больше или равно `2000`, поэтому итоговое значение является средним количеством прослушиваний только тех песен, что были выпущены в `2000` году и позднее.

Функция `AVG()` игнорирует значения `NULL` при вычислении среднего арифметического значений поля.
### В `PostgreSQL` эта функция работает точно также