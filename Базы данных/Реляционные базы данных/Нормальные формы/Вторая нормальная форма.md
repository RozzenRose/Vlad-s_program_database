#база_данных #реляционные #SQL #СУБД #нормализация_данных

Вторая нормальная форма является продолжением первой нормальной формы и включает следующие правила:
- таблица должна находиться в первой нормальной форме
- каждое неключевое поле таблицы должно зависеть только от полного первичного ключа, то есть от всех его полей

В качестве примера приведения ко второй нормальной форме рассмотрим таблицу из примера для первой формы, которая уже находится в первой нормальной форме, однако для наглядности добавим в нее еще поле с оценкой:

| **ID** | **Имя** | **Фамилия** | **Предмет**  | **Оценка** |
| ------ | ------- | ----------- | ------------ | ---------- |
| 1      | Билл    | Гейтс       | Информатика  | 5          |
| 1      | Билл    | Гейтс       | Маркетинг    | 4          |
| 2      | Алан    | Тьюринг     | Криптография | 5          |
| 2      | Алан    | Тьюринг     | Математика   | 5          |
| 3      | Эдгар   | Кодд        | Информатика  | 5          |
| 3      | Эдгар   | Кодд        | Математика   | 5          |
несложно показать, что данная таблица не находится во второй нормальной форме, например, в ней существуют зависимость поля `Оценка` от полей `ID` и `Предмет`(оценка зависит от студента и предмета), а также зависимость полей `Имя` и `Фамилия` от поля `ID`. Таким образом, поля `Имя` и `Фамилия` зависят не от полного первичного ключа, а лишь от его части, так как первичным ключом является сочетаний полей `ID` и `Предмет`, но при этом поле `Предмет` можно убрать без потери зависимости

Чтобы привести данную таблицу ко второй нормальной форме, необходимо разбить ее на несколько таблиц с учетом всех неполных зависимостей. В нашем случае неполную зависимость образуют поля `Имя` и `Фамилия`, поэтому их следует вынести в отдельную таблицу:

| **ID** | **Имя** | **Фамилия** |
| ------ | ------- | ----------- |
| 1      | Билл    | Гейтс       |
| 2      | Алан    | Тьюринг     |
| 3      | Эдгар   | Кодд        |
Тогда исходная таблица примет следующий вид:

| **ID** | **Предмет**  | **Оценка** |
| ------ | ------------ | ---------- |
| 1      | Информатика  | 5          |
| 1      | Маркетинг    | 4          |
| 2      | Криптография | 5          |
| 2      | Математика   | 5          |
| 3      | Информатика  | 5          |
| 3      | Математика   | 5          |
Теперь мы имеем две таблицы, каждая из которых находится во второй нормальной форме. Также можно заметить, что после этого разбиения персональные данные студента и информация о его успеваемости стали независимыми. Это значит, что больше нет части аномалий, свойственных первой нормальной форме: вставка и удаление данных не затрагивают информацию, не связанную с ними напрямую

Процесс разбиения одной большой таблицы на несколько меньших таблиц называется **декомпозицией**