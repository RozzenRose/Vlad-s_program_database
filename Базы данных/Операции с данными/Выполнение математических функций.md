#база_данных #реляционные #SQL #СУБД

При помощи вычислений можно решать задачи, требующие выполнения математических операций над извлекаемыми данными

```
+----+-------+----------------------+------------+-------+----------+
| id | place | trackname            | artist     | price | quantity |
+----+-------+----------------------+------------+-------+----------+
| 1  | 4     | Crazy On You         | Heart      | 2.00  | 31454    |
| 2  | 3     | My Lover             | The Sounds | 3.00  | 4558     |
| 3  | 2     | Running up That Hill | Kate Bush  | 1.00  | 15874    |
| 4  | 5     | Thrill               | The Sounds | 5.00  | 548      |
| 5  | 1     | Spent the Day in Bed | Morrissey  | 5.00  | 564797   |
+----+-------+----------------------+------------+-------+----------+
```

Например:
```MySQL
SELECT artist, trackname,
       price * quantity AS revenue
FROM Songs;
```
```
+------------+----------------------+------------+
| artist     | trackname            | revenue    |
+------------+----------------------+------------+
| Heart      | Crazy On You         | 62908.00   |
| The Sounds | My Lover             | 13674.00   |
| Kate Bush  | Running up That Hill | 15874.00   |
| The Sounds | Thrill               | 2740.00    |
| Morrissey  | Spent the Day in Bed | 2823985.00 |
+------------+----------------------+------------+
```

### Примечания
**Примечание 1.** Если хотя бы один из операндов в математическом выражении равен `NULL`, результатом всего выражения также будет значение `NULL`.
```sql
SELECT 1 + NULL,
       1 - NULL,
       1 * NULL,
       1 / NULL,
       (1 + NULL) / 2;
```
```
+----------+----------+----------+----------+----------------+
| 1 + NULL | 1 - NULL | 1 * NULL | 1 / NULL | (1 + NULL) / 2 |
+----------+----------+----------+----------+----------------+
| NULL     | NULL     | NULL     | NULL     | NULL           |
+----------+----------+----------+----------+----------------+
```

**Примечание 2.** В MySQL по умолчанию результатом деления на ноль является значение `NULL`
```sql
SELECT 1 / 0;
```
```
+-------+
| 1 / 0 |
+-------+
| NULL  |
+-------+
```
При необходимости данное поведение может быть изменено в настройках СУБД так, чтобы деление на ноль приводило к ошибке.

**Примечание 3.** Псевдонимы вычисляемых полей, как и псевдонимы обычных полей, не могут быть использованы в блоке оператора `WHERE` для фильтрации записей.
```sql
SELECT artist, trackname,
       price * quantity AS revenue
FROM Songs
WHERE revenue > 20000;
```
```
ERROR 1054: Unknown column 'revenue' in 'where clause'
```
При необходимости выполнить фильтрацию по вычисляемому полю выражение, определяющее это поле, придется продублировать.
```sql
SELECT artist, trackname,
       price * quantity AS revenue
FROM Songs
WHERE price * quantity > 20000;
```
```
+-----------+----------------------+------------+
| artist    | trackname            | revenue    |
+-----------+----------------------+------------+
| Heart     | Crazy On You         | 62908.00   |
| Morrissey | Spent the Day in Bed | 2823985.00 |
+-----------+----------------------+------------+
```

