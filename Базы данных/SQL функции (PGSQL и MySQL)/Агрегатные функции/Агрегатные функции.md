#база_данных #реляционные #SQL #СУБД #агрегатные_функции

Нередко при извлечении данных бывает необходимо не просто отобразить их в исходном или форматированном виде, а выполнить с ними определенного рода итоговые вычисления, например, определить сумму возвращенных значений или найти среди них минимальное. В `SQL` для этого предусмотренны `агрегатные функции` - функции, которые выполняют вычисления на наборе значений и возвращают одиночное значение. Запросы с такими функциями часто используются для анализа данных и создания отчетов

- [[AVG()]]
- [[Базы данных/SQL функции (PGSQL и MySQL)/Агрегатные функции/COUNT()|COUNT()]]
- [[MIN() MAX()]]
- [[GROUP_CONCAT() STRING_AGG()]]
- [[SUM()]]

 Внутри функций `AVG(), COUNT(), SUM()` и `GROUP_CONCAT()` можно использовать ключевое слово `DISTINCT`, чтобы в итоговых вычислениях участвовали лишь уникальные значения поля:
```SQL
... AVG(DISTINCT <название поля>)
```

```SQL
... COUNT(DISTINCT <название поля>)
```

```SQL
... SUM(DISTINCT <название поля>)
```

```SQL
... GROUP_CONCAT(DISTINCT <название поля>)
```

Помимо обычных полей, в качестве аргумента агрегатным функциям можно передавать и вычисляемые поля.
```SQL
SELECT MAX(length DIV 60) AS max_length_in_mins
FROM Songs;
```
```
+--------------------+
| max_length_in_mins |
+--------------------+
| 4                  |
+--------------------+
```
Так, в запросе выше сперва все значения поля `length` делятся нацело на `60`, а затем среди них выполняется поиск максимального.