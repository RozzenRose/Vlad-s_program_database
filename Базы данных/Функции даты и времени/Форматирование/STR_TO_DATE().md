#база_данных #реляционные #SQL #СУБД #дата #время #форматирование #STR_TO_DATE

Функция `STR_TO_DATE()` используется для выполнения операции, обратной форматированию. Она принимает два аргумента в следующем порядке:
- `string` — строка с компонентами даты и времени
- `format` — строка формата

Функция извлекает из строки `string` компоненты даты и времени в соответствии с форматом `format` и возвращает дату и время на основе извлеченных компонентов.
```MySQL
SELECT STR_TO_DATE('07:30, 20.10.2023', '%H:%i, %d.%m.%Y');
```
```
+-----------------------------------------------------+
| STR_TO_DATE('07:30, 20.10.2023', '%H:%i, %d.%m.%Y') |
+-----------------------------------------------------+
| 2023-10-20 07:30:00                                 |
+-----------------------------------------------------+
```

Если в строке с компонентами представлены только компоненты даты, функция `STR_TO_DATE()` вернет дату без времени, если только компоненты времени — время без даты.
```MySQL
SELECT STR_TO_DATE('20.10.2023', '%d.%m.%Y'),
       STR_TO_DATE('Time: 07:30', 'Time: %H:%i');
```
```
+---------------------------------------+-------------------------------------------+
| STR_TO_DATE('20.10.2023', '%d.%m.%Y') | STR_TO_DATE('Time: 07:30', 'Time: %H:%i') |
+---------------------------------------+-------------------------------------------+
| 2023-10-20                            | 07:30:00                                  |
+---------------------------------------+-------------------------------------------+
```

При этом для создания даты или даты и времени должны быть определены все компоненты даты (год, месяц, число), и если хотя бы один компонент пропущен, функция вернет значение `NULL`. В случае с временным значением достаточно одного любого компонента, остальные по умолчанию примут значение `0`.
```MySQL
SELECT STR_TO_DATE('20.10', '%d.%m'),
       STR_TO_DATE('Time: 07', 'Time: %H');
```
```
+-------------------------------+-------------------------------------+
| STR_TO_DATE('20.10', '%d.%m') | STR_TO_DATE('Time: 07', 'Time: %H') |
+-------------------------------+-------------------------------------+
| NULL                          | 7:00:00                             |
+-------------------------------+-------------------------------------+
```

Во время использования функции `STR_TO_DATE()` необходимо следить за тем, чтобы строка с компонентами даты и времени полностью соответствовала строке формата, в противном случае функция вернет значение `NULL`.
```MySQL
SELECT STR_TO_DATE('20.10.2023', '%d-%m-%Y'),
       STR_TO_DATE('Time: 07:30', '%H:%i');
```
```
+---------------------------------------+-------------------------------------+
| STR_TO_DATE('20.10.2023', '%d-%m-%Y') | STR_TO_DATE('Time: 07:30', '%H:%i') |
+---------------------------------------+-------------------------------------+
| NULL                                  | NULL                                |
+---------------------------------------+-------------------------------------+
```
### В `PostgreSQL` нет такой функции
Но можно сделать так:
```PostgreSQL
SELECT TO_DATE('2023-07-15', 'YYYY-MM-DD') AS date_value;
```

```PostgreSQL
SELECT TO_DATE('15-07-2023', 'DD-MM-YYYY') AS date_value;
```