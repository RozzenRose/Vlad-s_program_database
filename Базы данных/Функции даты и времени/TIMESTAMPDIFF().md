#база_данных #реляционные #SQL #СУБД #дата #время #TIMESTAMPDIFF 

Функция `TIMESTAMPDIFF()` используется для вычисления разницы между двумя значениями даты и времени в определенных единицах измерения. Она принимает три аргумента в следующем порядке:
- `unit` — единица измерения, в которой требуется получить разницу
- `datetime1` — первая дата и время
- `datetime2` — вторая дата и время

Функция возвращает разницу между значениями даты и времени `datetime1` и `datetime2` в единицах измерения `unit`.
```MySQL
SELECT TIMESTAMPDIFF(HOUR, '2023-10-20 07:00:00', '2023-10-20 12:00:00') AS hours,
       TIMESTAMPDIFF(MONTH, '2023-10-20 07:00:00', '2023-12-31 12:00:00') AS months;
```
```
+-------+--------+
| hours | months |
+-------+--------+
| 5     | 2      |
+-------+--------+
```

Следует заметить, что единица измерения, передаваемая в функцию `TIMESTAMPDIFF()` в качестве первого аргумента, должна быть одиночной, в противном случае произойдет ошибка.
```MySQL
SELECT TIMESTAMPDIFF(DAY_HOUR, '2023-10-20 07:00:00', '2023-10-25 12:00:00');
```
```
ERROR 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DAY_HOUR, '2023-10-20 07:00:00', '2023-10-25 12:00:00')' at line 1
```

Каждый из аргументов, передаваемых в функцию `TIMESTAMPDIFF()`, может быть как датой и временем, так и просто датой, при этом дата имеет нулевые значения по всем компонентам времени.

### В `PostgreSQL` нет такой функции
Но можно просты вычесть одну дату и время из другой:
```PostgreSQL
SELECT (TIMESTAMP '2023-07-15 14:30:00' - TIMESTAMP '2023-07-01 12:00:00') AS interval_difference;
```
```
interval_difference
---------------------
14 days 02:30:00
```
Разница указывается в днях и во временной переменной