#база_данных #реляционные #SQL #СУБД #текстовые_функции

![[Pasted image 20241122115742.png]]
- [[CHAR_LENGTH()]] - определение длины строки
- [[LOWER()]] - переводит строку в нижний регистр
- [[UPPER()]] - переводит строку  в верхний регистр
- [[LTRIM() и RTRIM()]] - удаляет пробелы с левого и правого края строки
- [[REVERSE()]] - обратный порядок строки
- [[Базы данных/Текстовые функции/REPEAT()|REPEAT()]] - несколько раз повторяет одну и тут же строку
- [[LPAD() и RPAD()]] - увеличение строк за счет других строк
- [[LEFT()]] - возвращает указанное количество символов с левого края строки
- [[RIGHT()]] - возвращает указанное количество символов с правого края строки
- [[LOCATE() POSITION()]] - ищет положение продстроки в строке
- [[SUBSTRING()]] извлекает подстроку из строки по индексам
- [[SUBSTRING_INDEX() SPLIT_PART()]] - разбивают строку по разделителю на подстроки, формирует из них одну большую подстроку
- [[TRIM()]] - вырезает подстроку из строки
- [[SPLIT_PART()]] - разбивает строку на подстроки по разделителю и возвращает указанную часть
- [[REPLACE()]] - зама подстроки в строке
- [[Примеры использования текстовых функций]]
### Примечания
**Примечание 1.** Функции могут применяться как в блоке оператора `SELECT`, так и в блоках операторов `WHERE` и `ORDER BY`.

Предположим, во время работы с персональными данными людей нам необходимо выполнить их сортировку по именам, хранящимся в поле `name`, однако сортировка должна происходить не по прямым значениям имен, а по количеству символов в них. В рамках запроса такой вариант сортировки будет выглядеть следующим образом:
```css
...
ORDER BY CHAR_LENGTH(name);
```

**Примечание 2.** Одним из недостатков функций является то, что в разных СУБД могут применяться разные функции для одних и тех же целей, и лишь некоторые функции в различных СУБД называются одинаково. Общая функциональность доступна в каждой СУБД, но названия функций и их синтаксис могут существенно отличаться. 

**Примечание 3.** Функции `CHAR_LENGTH(), LOWER(), UPPER(), LTRIM(), RTRIM(), REVERSE(), REPEAT(), LPAD()` и `RPAD()` при вызове с аргументом `NULL` возвращают значение `NULL`.
```scss
SELECT CHAR_LENGTH(NULL)  AS value1,
       LOWER(NULL)        AS value2,
       UPPER(NULL)        AS value3,
       LTRIM(NULL)        AS value4,
       REVERSE(NULL)      AS value5,
       REPEAT(NULL, 2)    AS value6,
       LPAD(NULL, 5, '-') AS value7;
```
```
+--------+--------+--------+--------+--------+--------+--------+
| value1 | value2 | value3 | value4 | value5 | value6 | value7 |
+--------+--------+--------+--------+--------+--------+--------+
| NULL   | NULL   | NULL   | NULL   | NULL   | NULL   | NULL   |
+--------+--------+--------+--------+--------+--------+--------+
```

**Примечание 4.** Несмотря на то что функции `CHAR_LENGTH(), REVERSE(), REPEAT(), LPAD()` и `RPAD()` в первую очередь предназначены для работы со строковыми значениями, они также могут обрабатывать и числовые данные.
```sql
SELECT CHAR_LENGTH(123),
       REVERSE(123),
       REPEAT(123, 2),
       LPAD(123, 4, '-');
```
```
+------------------+--------------+----------------+-------------------+
| CHAR_LENGTH(123) | REVERSE(123) | REPEAT(123, 2) | LPAD(123, 4, '-') |
+------------------+--------------+----------------+-------------------+
| 3                | 321          | 123123         | -123              |
+------------------+--------------+----------------+-------------------+
```

**Примечание 5.** В SQL реализованы практически все необходимые функции для работы с текстовыми данными, и нами была рассмотрена большая их часть, однако не все. Так, среди пропущенных функций можно выделить функцию `SPACE()`, возвращающую строку из заданного числа пробелов, или функции `ORD()` и `CHAR()`, с помощью которых можно получить числовой код символа в ASCII-таблице и наоборот. При необходимости со списком всех текстовых функций можно ознакомиться по [ссылке](https://docs-python.ru/packages/klient-bd-mysql/funktsii-raboty-strokami-bd-mysql/).