#база_данных #реляционные #SQL #СУБД #текстовые_функции #SUBSTRING_INDEX 

Функция `SUBSTRING_INDEX()` используется для извлечения подстроки из строки с помощью разделителя. Она принимает три аргумента в следующем порядке:
- `str` — исходная строка
- `delimiter` — разделитель
- `count` — количество появлений разделителя

Функция возвращает подстроку, входящую в `str`, перед `count` появлением разделителя `delimiter`.
```csharp
SELECT SUBSTRING_INDEX('g-e-e-k', '-', 1),
       SUBSTRING_INDEX('g-e-e-k', '-', 2),
       SUBSTRING_INDEX('g-e-e-k', '-', 3);
```
```
+------------------------------------+------------------------------------+------------------------------------+
| SUBSTRING_INDEX('g-e-e-k', '-', 1) | SUBSTRING_INDEX('g-e-e-k', '-', 2) | SUBSTRING_INDEX('g-e-e-k', '-', 3) |
+------------------------------------+------------------------------------+------------------------------------+
| g                                  | g-e                                | g-e-e                              |
+------------------------------------+------------------------------------+------------------------------------+
```

Количество появлений разделителя может быть отрицательным числом, в таком случае извлечение подстроки происходит с конца.
```csharp
SELECT SUBSTRING_INDEX('g-e-e-k', '-', -2),
       SUBSTRING_INDEX('g-e-e-k', '-', -3);
```
```
+-------------------------------------+-------------------------------------+
| SUBSTRING_INDEX('g-e-e-k', '-', -2) | SUBSTRING_INDEX('g-e-e-k', '-', -3) |
+-------------------------------------+-------------------------------------+
| e-k                                 | e-e-k                               |
+-------------------------------------+-------------------------------------+
```
Если разделителя в строке нет, функция `SUBSTRING_INDEX()` вернет строку в исходном виде.

Учитывает регистр
### В `PostgreSQL` нет этой функции
Но можно сделать то же самое через функцию [[SPLIT_PART()]] так
```PostgreSQL
WITH split AS (
    SELECT SPLIT_PART('one,two,three,four', ',', 1) AS part1,
           SPLIT_PART('one,two,three,four', ',', 2) AS part2,
           SPLIT_PART('one,two,three,four', ',', 3) AS part3,
           SPLIT_PART('one,two,three,four', ',', 4) AS part4
)
SELECT part1 || ',' || part2 AS result
FROM split;
```