#база_данных #реляционные #SQL #СУБД #текстовые_функции

Для того, чтобы применить функцию к полю таблицы, достаточно просто указать это поле в качестве аргумента функции. Давайте рассмотрим несколько примеров.

**Пример 1.** Необходимо извлечь имена исполнителей, а также посчитать количество символов в именах исполнителей. Для этого мы можем использовать функцию `CHAR_LENGTH()`.
```sql
SELECT artist, CHAR_LENGTH(artist) AS length
FROM Songs;
```
```
+------------+--------+
| artist     | length |
+------------+--------+
| Heart      | 5      |
| The Sounds | 10     |
| Kate Bush  | 9      |
| The Sounds | 10     |
| Morrissey  | 9      |
+------------+--------+
```

**Пример 2.** Необходимо извлечь имена исполнителей и названия их песен, при этом названия песен должны быть отображены в нижнем регистре. Для этого мы можем использовать функцию `LOWER()`.
```sql
SELECT artist, LOWER(trackname) AS trackname
FROM Songs;
```
```
+------------+----------------------+
| artist     | trackname            |
+------------+----------------------+
| Heart      | crazy on you         |
| The Sounds | my lover             |
| Kate Bush  | running up that hill |
| The Sounds | thrill               |
| Morrissey  | spent the day in bed |
+------------+----------------------+
```

**Пример 3.** Необходимо извлечь имена исполнителей и названия их песен, при этом названия песен должны быть отображены в верхнем регистре в обратном порядке. Для этого мы можем использовать функции `UPPER()` и `REVERSE()`.
```sql
SELECT artist, REVERSE(UPPER(trackname)) AS trackname
FROM Songs;
```
```
+------------+----------------------+
| artist     | trackname            |
+------------+----------------------+
| Heart      | UOY NO YZARC         |
| The Sounds | REVOL YM             |
| Kate Bush  | LLIH TAHT PU GNINNUR |
| The Sounds | LLIRHT               |
| Morrissey  | DEB NI YAD EHT TNEPS |
+------------+----------------------+
```
Результатом выполнения функции является определенное значение, поэтому функцию можно использовать в качестве аргумента другой функции. В этом примере сначала функция `UPPER()` переводит строку в верхний регистр, а затем функция `REVERSE()` переворачивает эту строку. При этом, если поменять функции местами, результат не изменится.
```sql
SELECT artist, UPPER(REVERSE(trackname)) AS trackname
FROM Songs;
```
```
+------------+----------------------+
| artist     | trackname            |
+------------+----------------------+
| Heart      | UOY NO YZARC         |
| The Sounds | REVOL YM             |
| Kate Bush  | LLIH TAHT PU GNINNUR |
| The Sounds | LLIRHT               |
| Morrissey  | DEB NI YAD EHT TNEPS |
+------------+----------------------+
```
Разница заключается лишь в том, что сначала выполнится функция `REVERSE()`, а только потом `UPPER()`. Но при перестановке функций результат не всегда будет одинаковым, в некоторых случаях порядок вложения функций нужно соблюдать.

**Пример 4.** Необходимо извлечь имена исполнителей, при этом каждое имя необходимо развернуть, а затем дополнить символом `!` с начала строки до длины `20`. Для этого мы можем использовать функции `REVERSE()` и `LPAD()`.
```sql
SELECT artist, LPAD(REVERSE(artist), 20, '!') AS result
FROM Songs;
```
```
+------------+----------------------+
| artist     | result               |
+------------+----------------------+
| Heart      | !!!!!!!!!!!!!!!traeH |
| The Sounds | !!!!!!!!!!sdnuoS ehT |
| Kate Bush  | !!!!!!!!!!!hsuB etaK |
| The Sounds | !!!!!!!!!!sdnuoS ehT |
| Morrissey  | !!!!!!!!!!!yessirroM |
+------------+----------------------+
```
В этом примере сначала функция `REVERSE()` переворачивает строку, а затем функция `LPAD()` дополняет ее символом `!`. Это пример того, где порядок вложения функций имеет значение. Если мы поменяем функции местами, результат уже будет другим.
```sql
SELECT artist, REVERSE(LPAD(artist, 20, '!')) AS result
FROM Songs;
```
```
+------------+----------------------+
| artist     | result               |
+------------+----------------------+
| Heart      | traeH!!!!!!!!!!!!!!! |
| The Sounds | sdnuoS ehT!!!!!!!!!! |
| Kate Bush  | hsuB etaK!!!!!!!!!!! |
| The Sounds | sdnuoS ehT!!!!!!!!!! |
| Morrissey  | yessirroM!!!!!!!!!!! |
+------------+----------------------+
```