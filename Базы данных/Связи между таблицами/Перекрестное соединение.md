#база_данных #реляционные #SQL #СУБД #CROSS_JOIN

#### Таблицы для примеров:
**Первая таблица.** Информация о студентах располагается в таблице `Students`, которая имеет следующий вид:

```
+----+-----------------+
| id | student         |
+----+-----------------+
| 1  | Peter Parker    |
| 2  | Mary Jane       |
| 3  | Gwen Stacy      |
| 4  | Harry Osborn    |
+----+-----------------+
```
Первое поле этой таблицы содержит идентификатор студента, второе — имя и фамилию.

**Вторая таблица.** Информация о преподаваемых предметах располагается в таблице `Subjects`, которая имеет следующий вид:
```
+----+-----------+
| id | name      |
+----+-----------+
| 1  | Math      |
| 2  | Chemistry |
| 3  | Physics   |
+----+-----------+
```
### Перекрестное соединение
При перекрестном соединении двух таблиц каждая запись из одной таблицы сопоставляется с каждой записью из другой таблицы. Перекрестное соединение отличается от внутреннего и внешнего тем, что не требует условия соединения, поскольку при перекрестном соединении сопоставление записей выполняется не по какому-либо правилу, а обычным перебором всех возможных комбинаций

Например, результатом перекрестного соединения таблиц `Students` и `Subjects` является следующая таблица:
```
+----+--------------+----+-----------+
| id | student      | id | name      |
+----+--------------+----+-----------+
| 1  | Peter Parker | 3  | Physics   |
| 1  | Peter Parker | 2  | Chemistry |
| 1  | Peter Parker | 1  | Math      |
| 2  | Mary Jane    | 3  | Physics   |
| 2  | Mary Jane    | 2  | Chemistry |
| 2  | Mary Jane    | 1  | Math      |
| 3  | Gwen Stacy   | 3  | Physics   |
| 3  | Gwen Stacy   | 2  | Chemistry |
| 3  | Gwen Stacy   | 1  | Math      |
| 4  | Harry Osborn | 3  | Physics   |
| 4  | Harry Osborn | 2  | Chemistry |
| 4  | Harry Osborn | 1  | Math      |
+----+--------------+----+-----------+
```
Как можно заметить, таблица, полученная в результате соединения, включает все записи из обеих таблиц, причем каждой записи из одной таблицы в соответствие поставлена каждая запись из другой таблицы. Например, первая запись из таблицы `Students` сопоставляется с каждой из трех записей из таблицы `Subjects`. Аналогичное справедливо и для оставшихся записей из таблицы `Students`.
### Оператор `CROSS JOIN`
В `SQL` перекрестное соединение выполняется с помощью оператора `CROSS JOIN`. Сначала указывается первая таблица, затем оператор `CROSS JOIN`, а после вторая таблица.

Общий синтаксис перекрестного соединения имеет следующий вид:
```css
<первая таблица> CROSS JOIN <вторая таблица>
```
В качестве примера выполним перекрестное соединение таблиц `Srudents` и `Subjects`
```sql
SELECT *
FROM Subjects CROSS JOIN Students;
```
```
+----+--------------+----+-----------+
| id | student      | id | name      |
+----+--------------+----+-----------+
| 1  | Peter Parker | 3  | Physics   |
| 1  | Peter Parker | 2  | Chemistry |
| 1  | Peter Parker | 1  | Math      |
| 2  | Mary Jane    | 3  | Physics   |
| 2  | Mary Jane    | 2  | Chemistry |
| 2  | Mary Jane    | 1  | Math      |
| 3  | Gwen Stacy   | 3  | Physics   |
| 3  | Gwen Stacy   | 2  | Chemistry |
| 3  | Gwen Stacy   | 1  | Math      |
| 4  | Harry Osborn | 3  | Physics   |
| 4  | Harry Osborn | 2  | Chemistry |
| 4  | Harry Osborn | 1  | Math      |
+----+--------------+----+-----------+
```

### Примечание:
#### Примечание 1
При выполнении перекрестного соединения таблицы с самой собой необходимо использовать псевдонимы, в противном случае запрос завершится с ошибкой.
```sql
SELECT *
FROM Subjects CROSS JOIN Subjects;
```
```no-highlight
ERROR 1066: Not unique table/alias: 'Subjects'
```

```sql
SELECT *
FROM Subjects AS S1 CROSS JOIN Subjects AS S2;
```
```
+----+-----------+----+-----------+
| id | name      | id | name      |
+----+-----------+----+-----------+
| 3  | Physics   | 1  | Math      |
| 2  | Chemistry | 1  | Math      |
| 1  | Math      | 1  | Math      |
| 3  | Physics   | 2  | Chemistry |
| 2  | Chemistry | 2  | Chemistry |
| 1  | Math      | 2  | Chemistry |
| 3  | Physics   | 3  | Physics   |
| 2  | Chemistry | 3  | Physics   |
| 1  | Math      | 3  | Physics   |
+----+-----------+----+-----------+
```
#### Примечание 2
При выполнении перекрестного соединения порядок таблиц не имеет значения. Если мы соединим первую таблице со второй или вторую с первой, результат будет равнозначным.

Результатом приведенного ниже запроса:
```sql
SELECT student, name
FROM Students CROSS JOIN Subjects;
```
как и результатом приведенного ниже запроса:
```sql
SELECT student, name
FROM Subjects CROSS JOIN Students;
```
является:
```
+--------------+-----------+
| student      | name      |
+--------------+-----------+
| Peter Parker | Physics   |
| Peter Parker | Chemistry |
| Peter Parker | Math      |
| Mary Jane    | Physics   |
| Mary Jane    | Chemistry |
| Mary Jane    | Math      |
| Gwen Stacy   | Physics   |
| Gwen Stacy   | Chemistry |
| Gwen Stacy   | Math      |
| Harry Osborn | Physics   |
| Harry Osborn | Chemistry |
| Harry Osborn | Math      |
+--------------+-----------+
```
Единственная разница заключается, разве что, в порядке полей в таблице, получаемой в результате соединения: сначала следуют все поля первой таблицы, затем — второй.
#### Примечание 3
Перекрестное соединение можно выполнить и без оператора `CROSS JOIN`, для этого достаточно перечислить соединяемые таблицы через запятую.

Например, приведенные ниже запросы функционально полностью идентичны:
```sql
SELECT *
FROM Students CROSS JOIN Subjects;
```

```sql
SELECT *
FROM Students, Subjects;
```  
Cинтаксис с перечислением таблиц через запятую не следует использовать при комбинировании различных видов соединений, поскольку соединение таблиц в таком случае может выполняться не поочередно. Например, если при соединении трех таблиц между первыми двумя таблицами необходимо выполнить перекрестное соединение, а между полученным результатом и третьей таблицей — внешнее, для перекрестного соединения следует использовать оператор `CROSS JOIN`.