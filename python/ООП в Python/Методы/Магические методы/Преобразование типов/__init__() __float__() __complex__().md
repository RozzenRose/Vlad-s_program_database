#OOP #ООП #Python #магический_метод 


Преобразовывать экземпляры собственных классов в объекты типов `int`, `float` и `complex` можно, определив в классе ряд дандерных методов:
- `__int__()` — определяет поведение экземпляра при передаче в функцию `int()`. Метод должен возвращать значение, соответствующее преобразованию экземпляра в тип `int`
- `__float__()` — определяет поведение экземпляра при передаче в функцию `float()`. Метод должен возвращать значение, соответствующее преобразованию экземпляра в тип `float`
- `__complex__()` — определяет поведение экземпляра при передаче в функцию `complex()`. Метод должен возвращать значение, соответствующее преобразованию экземпляра в тип `complex`

Определим в классе `Angle` методы `__init__()` и `__float__()`, которые позволят преобразовывать экземпляры этого класса в целые и вещественные числа соответственно
```python
class Angle:
    def __init__(self, value):
        self.value = value

    def __int__(self):
        return int(self.value)

    def __float__(self):
        return float(self.value)


angle1 = Angle(100)
angle2 = Angle(100.1)

print(int(angle1))
print(int(angle2))
print(float(angle1))
print(float(angle2))
```
```
100
100
100.0
100.1
```

В случае если дандеры `__int__()`, `__float__()` и `__complex__()` не определены, соответствующие функции будут обращаться к методу `__index__()`, который указывает на то, что объект имеет целочисленный тип. Этот метод должен возвращать целое число, которое и будет передаваться в эти функции. Наличие этого метода у класса так же позволяет применять к экземпляру этого класса функции преобразования в другую систему счисления, такие как `bin()`, `oct()` и `hex()`
```python
class Angle:
    def __init__(self, value):
        self.value = value

    def __index__(self):
        print('Вызов метода __index__()')
        return self.value


angle = Angle(100)

print(int(angle))
print(float(angle))
print(bin(angle))
print(oct(angle))
print(hex(angle))
```
```
Вызов метода __index__()
100
Вызов метода __index__()
100.0
Вызов метода __index__()
0b1100100
Вызов метода __index__()
0o144
Вызов метода __index__()
0x64
```