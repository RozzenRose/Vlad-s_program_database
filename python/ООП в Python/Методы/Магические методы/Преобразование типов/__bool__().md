#OOP #ООП #Python #магический_метод 


Любой объект в `Python` можно проверить на истинность и привести к логическому типу с помощью функции `bool()`

Представим ситуацию, в которой нам необходимо проверить экземпляр класса `Angle` на истинность
```python
class Angle:
    def __init__(self, value):
        self.value = value
```
Будем считать экземпляр истинным, если он представляет ненулевой угол, в противном случае будем считать его ложным. Для этого определим магический метод `__bool__()`, который будет содержать необходимую логику
```python
class Angle:
    def __init__(self, value):
        self.value = value

    def __bool__(self):
        return self.value != 0


print(bool(Angle(-110)))
print(bool(Angle(0)))
print(bool(Angle(0.0)))
print(bool(Angle(120.1)))
```
```
True
False
False
True
```
Помимо магического метода `__bool__()`, за приведение объекта к логическому типу и его поведение при передаче в функцию `bool()` может отвечать и магический метод `__len__()`. Если в классе не реализован метод `___bool__()`, то происходит попытка вызове метода `__len__()`, и если он реализован и возвращает ненулевое значение, то объект считается истинным, в противном случае объект считается ложным
```python
class Angle:
    def __init__(self, value):
        self.value = value

    def __len__(self):
        print('Вызов метода __len__()')
        return self.value != 0


print(bool(Angle(-110)))
print(bool(Angle(0)))
print(bool(Angle(120.1)))
```
```
Вызов метода __len__()
True
Вызов метода __len__()
False
Вызов метода __len__()
True
```
Если в классе отсутствуют оба магических метода `__bool__()` и `__len__()`, то все экземпляры класса считаются истинными. Если же в классе присутствуют оба метода, то для всех логических приведений будет использоваться именно метод `__bool__()`

Вызов дандера `__bool__()`(или `__len__()`) происходит во время любых логических приведений, например при проверки через оператор `if`
```python
class Angle:
    def __init__(self, value):
        self.value = value

    def __bool__(self):
        print('Вызов метода __bool__()')
        return bool(self.value)


angle = Angle(100)

if angle:
    print('I am True')
else:
    print('I am False')
```
```
Вызов метода __bool__()
I am True
```
Встроенные методы `all()` и `any()` так же приводят к вызову метода `__bool__()`