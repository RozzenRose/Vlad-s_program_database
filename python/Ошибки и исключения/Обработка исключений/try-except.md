#python #try-except #исключения #ошибки

![[Pasted image 20240606020741.png]]
Позволяет выполнить код, который потенциально может вызвать исключение безопасно. В случае, если исключение будет сформировано в блоке `try`, оно будет перехвачено блоком `except`, после чего выполнение кода в блоке `try` остановится и начнется выполнение кода в блоке `except`. При этом выполнение всего программного кода не прекратится.

Общий шаблон:
```python
try:
    # контролируемый код
except тип_ошибки_1:
    # код обработки ошибки (исключения)
except тип_ошибки_2:
    # код обработки ошибки (исключения)
...
except тип_ошибки_n:
    # код обработки ошибки (исключения)
else:
    # код для случая, если ошибки не было
finally:
    # код, который выполняется всегда
```
Пример:
```python
from datetime import date, time

try:
	day, mount, year = input('Введите дату в формате ДД.ММ.ГГГГ').split('.')
	my_date = date(int(year), int(mount), int(day))
	print(my_date)
except ValueError:
	print('Ошибка ввода')
```
Исключение `ValueError` в этом коде может возникнуть в двух случаях, если функция `int()` не сможет преобразовать строку в число или если числа, которые введет пользователь невозможно будет преобразовать в дату. Но в случае, если одно из этих двух событий случиться программа не будет остановлена.

Остановится выполнение кода внутри блока `try`. Блок `except` начнет выполнение кода внутри себя.

Кстати, если после `except` убрать тип ошибки, то код в блоке `except` будет выполняться при возникновении вообще любой ошибки

Блоков `except` может быть несколько, они будут проверять ошибку на указанный тип последовательно, после того, как исполнится хотя бы один, следующие проверяться уже не будут.

В случае, если никаких специальных действий в случае возникновении ошибки не требуется, в блок `except` можно поместить заглушку `pass`

Содержимое блока `else` выполнится после того, как выполнится код в блоке `try`, в случае, если блоки `except` не перехватят никаких исключений. 

Содержимое блока `finally` выполнится, после того, как выполнится код в блоке `try`, пройдут все проверки в блоках `except` и выполнится код в блоке `else`, если он прописан. Результат проверок блоками `except` не имеет значения для блока `finally` и возникновение исключений тоже. Содержимое блока `finally` выполняется в любом случае.

|Тип исключения|Описание|
|---|---|
|`BaseException`|является классом самого верхнего уровня и базовым для всех прочих  <br>классов исключений|
|`Exception`|базовый класс для большинства встроенных в Python исключений. Именно  <br>его, а не `BaseException`, необходимо наследовать при создании пользовательского класса  <br>исключения|
|`AssertionError`|возбуждается инструкцией `assert`|
|`AttributeError`|возбуждается при попытке обращения к несуществующему атрибуту объекта|
|`EOFError`|возбуждается функцией `input()` при достижении конца файла с вводными данными|
|`ImportError`|возбуждается, если невозможно импортировать модуль или пакет|
|`IndexError`|возбуждается при попытке получить элемент коллекции по несуществующему индексу|
|`KeyError`|возбуждается при попытке получить элемент коллекции по несуществующему ключу|
|`MemoryError`|возбуждается, если интерпретатору существенно не хватает оперативной памяти|
|`NameError`|возбуждается при попытке обратиться к необъявленной переменной|
|`TypeError`|возбуждается при несоответствии типов|
|`ValueError`|возбуждается при передаче в функцию аргумента с неподдерживаемым значением|
|`ZeroDivisionError`|возбуждается при попытке выполнить деление на ноль|
|`NotImplementedError`|возбуждается, если наследник класса не переопределил метод, который должен был переопределить|