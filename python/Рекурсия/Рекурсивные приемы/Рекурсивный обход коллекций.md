#Python #рекурсия


Рекурсия является незаменимым помощником при работе с вложенными структурами данных. Рассмотрим несколько задачь:


***Задача 1***
Дан список, элементами которого могут быть только строки или аналогичные списки, содержащие строки и вложенные списки. Необходимо вывести все строки из данного списка и из всех вложенных, разделив пробелом.

***Решение***
Реализуем рекурсивную функцию `get_all_str()`, которая принимает в качестве аргумента указанный список и выводит его содержимое в соответствии с условием задачи.

Итак, для начала определимся с базовым случаем. Он простой: если элемент является строкой, принтнем ее саму с пробелом. А в случае, если это не строка, начнем поэлементно передавать этот объект в эту же самую функцию.
```python
def get_all_str(data):
    if type(data) == str:
        print(data, end=' ')            # базовый случай
    if type(data) == list:
        for i in data:
            get_all_str(i)              # рекурсивный случай

numbers = ['1', ['2', '3', ['4'], ['5', ['6', '7']]]]
get_all_str(numbers)
```
```no-highlight
1 2 3 4 5 6 7 
```


***Задача 2***
Дан словарь произвольной вложенности, то есть значениями в словаре могут быть другие словари. Необходимо определить значение, которое соответствует заданному ключу и вернуть его. При этом гарантируется, что такой ключ имеется в словаре, причем он единственный.

***Решение***
Реализуем рекурсивную функцию `find_key()`, которая принимает два аргумента в следующем порядке:
- `data` — словарь произвольной вложенности
- `key` — ключ, значение которого нужно вернуть
Итак, для начала определимся с базовым случаем. Он простой: если ключ есть в словаре, вернем его значение. 

В противном случае нам нужно с помощью цикла `for` пройтись по всем ключам и значениями словаря, чтобы понять, есть ли среди значений вложенные словари. И если значением является вложенный словарь, то мы используем рекурсию: вызываем нашу же функцию и передаем ей в качестве аргумента новый словарь.
```python
def find_key(data, key):
    if key in data:
        return data[key]                # базовый случай
    
    for v in data.values():
        if type(v) == dict:
            value = find_key(v, key)    # рекурсивный случай
            if value is not None:
                return value 

info = {'name': 'Alyson', 
        'surname': 'Hannigan', 
        'birthday': {'day': 24, 'month': 'March', 'year': 1974},
        'family': {'parents': {'mother': 'Emilie Posner', 'father': 'Alan Hannigan'}}}

print(find_key(info, 'year'))
print(find_key(info, 'father'))
```
```
1974
Alan Hannigan
```