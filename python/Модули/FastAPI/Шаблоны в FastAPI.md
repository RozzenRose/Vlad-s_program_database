#FastAPI 

![[Pasted image 20250403135314.png]]
**FastAPI** сам по себе не предоставляет встроенную поддержку шаблонизаторов, таких как **Jinja2** или **Template Toolkit**. Он предназначен в первую очередь для создания **API**, а не для рендеринга полноценных веб-страниц с динамическим содержанием. Для этой цели нужно использовать дополнительные библиотеки и инструменты.

**Jinja** - это мощный и популярный шаблонизатор для **Python**. Он позволяет разделять логику приложения от представления (view), что делает код более читаемым, поддерживаемым и масштабируемым. **Jinja**  используется для динамической генерации текста, **HTML**, **XML** и других типов контента. Документацию на **Jinja** вы можете посмотреть по [этой ссылке](https://jinja.palletsprojects.com/en/3.0.x/templates/#).
```terminal
pip install jinja2
```

Синтаксис **Jinja2** основан на использовании специальных тегов, заключенных в фигурные скобки, для встраивания динамического контента и управления потоком выполнения шаблона.

Синтаксис **Jinja** использует двойные фигурные скобки `{{ ... }}` для вывода переменных и `{% ... %}` для управляющих структур (условные операторы, циклы). Различают три основных типа тегов:
#### 1. Выражения (Expressions)
Выражения используются для вывода значений переменных, выполнения вычислений и применения фильтров. Они заключаются в двойные скобки: `{{ expression }}`
- **Вывод переменных:** Самый простой способ вывода – это просто указать имя переменной:  `{{ my_variable }}`.
- **Вычисления:** Можно выполнять арифметические и логические операции: `{{ 1 + 2 }}`, `{{ my_variable > 10 }}`.
- **Доступ к атрибутам:** Доступ к атрибутам объектов осуществляется через точку: `{{ my_object.attribute }}`.
- **Доступ к элементам:** Доступ к элементам списков и словарей осуществляется через квадратные скобки: `{{ my_list[0] }}`, `{{ my_dict["key"] }}`.
- **Фильтры:** Фильтры применяются после выражения через вертикальную черту  `|`: `{{ my_variable | upper }}` (преобразует в верхний регистр), `{{ my_date | date('Y-m-d') }}` (форматирует дату).
- **Тесты:** Проверки условий с помощью  `is`: `{{ my_variable is defined }}`, `{{ my_variable is none }}`.
#### 2. Управляющие структуры (Statements)
Управляющие структуры используются для управления потоком выполнения шаблона. Они заключаются в двойные фигурные скобки с процентами: `{% statement %}`
- **`if`, `elif`, `else`:** Условные операторы:
```django
{% if my_variable %}
  <p>My variable is defined!</p>
{% elif my_other_variable %}
  <p>My other variable is defined!</p>
{% else %}
  <p>Neither variable is defined.</p>
{% endif %}
```
- **`for`:** Цикл для итерации по последовательностям:
```django
<ul>
  {% for item in my_list %}
    <li>{{ item }}</li>
  {% endfor %}
</ul>
```
- **`set`:** Для создания или присвоения значений переменным внутри шаблона:
```django
{% set my_variable = "Hello" %}
<p>{{ my_variable }}</p>
```
- **`include`:** Для включения других шаблонов:
```django
{% include 'header.html' %}
```
- **`extends`:** Для наследования от других шаблонов:
```django
{% extends 'base.html' %}
```
- **`block`:** Для определения блоков в шаблонах (используется с  `extends`):
```django
{% block content %}
  <p>This is the content block.</p>
{% endblock %}
```
#### 3. Комментарии:
Комментарии игнорируются при рендеринге шаблона. Они заключаются в `{# comment #}`:
```graphql
{# This is a comment #}
```
#### Примеры использования
- **Вывод переменной:** `{{ user.name }}`
- **Условное отображение:**
    ```django
    {% if user.is_admin %}
      <p>Администратор</p>
    {% else %}
      <p>Обычный пользователь</p>
    {% endif %}
    ```
- **Цикл:**
    ```django
    <ul>
      {% for product in products %}
        <li>{{ product.name }} - {{ product.price }}</li>
      {% endfor %}
    </ul>
    ```
- **Фильтр:** `{{ date | date('Y-m-d') }}`
