#FastAPI

![[MR.png]]
Иногда нам необходимо указать значения по умолчанию для параметров запроса и параметров пути некоторых служб **API**, чтобы избежать сообщений об ошибках. Установка значений по умолчанию для параметров позволит выполнить метод **API** с указанием значений параметров или без них. В зависимости от требований, назначенные значения по умолчанию обычно равны `0` для числовых типов, `False` для типов `bool`, пустой строке для строковых типов, пустому списку (`[]`) для типов `List` и пустому словарю (`[]`) для типов `Dict`

Попробуем применить значения по умолчанию к параметрам пути:
```python
from fastapi import FastAPI

app = FastAPI()


@app.get("/user")
async def login(username: str, age: int) -> dict:
    return {"user": username, "age": age}
```
Запустим приложение и перейдем на странице документации, и мы увидим что поля `username` и `age` выделены надписью `*required`, это значит что они являются обязательными.
![[Pasted image 20250325193127.png]]
Попробуем установить значение по умолчанию для параметра `age=30`.
```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/user")
async def login(username: str, age: int = 30) -> dict:
    return {"user": username, "age": age}
```
Проверим документацию:
![[Pasted image 20250326134516.png]]
А при переходе по адресу [127.0.0.1:8000/user?username=Vlad](http://127.0.0.1:8000/user?username=Vlad), мы уже увидим подставленное значение по умолчанию.
![[Pasted image 20250326134744.png]]

Таким же образом, если мы укажем значение полня как `None`, то мы сможем объявить `age` как необязательный параметр. 
```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/user")
async def login(username: str, age: int | None = None) -> dict:
    return {"user": username, "age": age}
```
В этом случае, параметр  `age` будет не обязательным и будет иметь значение `None` по умолчанию. И теперь если мы перейдем по адресу [127.0.0.1:8000/user?username=Vlad](http://127.0.0.1:8000/user?username=Vlad), то получим следующий результат:
![[Pasted image 20250326135059.png]]
А также перейдя в документацию нашего **API** мы увидим что поле `age` не является обязательным (отсутствует `*required`)
![[Pasted image 20250326135336.png]]
На данный момент мы проверяем получаемые значения только на соответствие типу данных. Но для правильной работы нашего **API** нам необходимо проверять получаемые параметры пути или запроса и писать дополнительный код для проверки входных данных.

Но **FastAPI** содержит уже готовые классы для валидации получаемых параметров. Они позволяют установить ограничения на допустимые значения параметров (например, минимальная и максимальная длина строки, диапазон чисел, регулярные выражения). Это предотвращает передачу некорректных данных, которые могут привести к ошибкам в работе **API**. 