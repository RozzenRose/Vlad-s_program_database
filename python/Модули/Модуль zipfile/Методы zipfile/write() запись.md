#python #zip #файлы #работа_с_файлами #printdir #чтение_архива #write #метод


Перед тем, как писать что-то в архив нужно создать файловый объект, в процессе создания нужно передать аргументу `mode` значения `mode='w'` или `mode='a'`

Для записи файла в архив, используется метод `write()`.

### Запись с предварительным созданием архива
В случае, если самого архива еще не существует, передадим в метод `ZipFile` параметру `mode='w'`. Тогда метод `ZipFile()` создаст новый архив с указанным именем.
`zip для примера`
![[test.zip]]
```python
from zipfile import ZipFile

with ZipFile('archive.zip', mode='w') as zip_file:
    zip_file.write('program.py')
    zip_file.write('lse.jpeg')
    print(zip_file.namelist())
```
создает в папке с программой архив с именем `archive.zip` и записывает в его содержимое файлов `program.py` и `lse.jpeg`, которые  так же находятся в папке с программой, а затем выводит список всех файлов данного архива:
```
['program.py', 'lse.jpeg']
```
Если файлы для записи в архив не будут найдены, то возникнет ошибка (исключение) `FileNotFoundError` 

Еще у методу `write()` можно передать вторую строку в качестве аргумента. Таким образом в архив будет занесен файл, имя которого было указанно в первом аргументе. А называться он будет именем указанным в строке, переданной методу в качестве второго аргумента. 
`При этом второй аргумент помимо нового имени файла, может еще содержать относительный путь этого файла, и создан этот файл будет с указанным именем в указанной директории. Пример будет в 
```python
from zipfile import ZipFile

with ZipFile('archive.zip', mode='w') as zip_file:
    zip_file.write('program.py', 'new_program.py')  # первый аргумент - это имя файла
    zip_file.write('lse.jpeg', 'lse1.jpeg')         # второй аргумент - это имя файла в архиве
    print(zip_file.namelist())                      
```
Создает в папке с программой архив с именем `archive.zip` и записывает  в него содержимое файлов `progtam.py` и `lse.jpeg`, которые так же находятся в папке с программой, а затем выводит список всех файлов данного архива:
```
['new_program.py', 'lse1.jpeg']
```
При этом второй аргумент помимо нового имени файла, может еще содержать относительный путь этого файла, и создан этот файл будет с указанным именем в указанной директории. `Пример чуть дальше`

### Запись в уже существующий архив
Для добавления файлов в уже существующий архив необходимо создать объект `ZipFile` и передать в параметр `mode='a'`.
```python
from zipfile import ZipFile

with ZipFile('test.zip', mode='a') as zip_file:
    zip_file.write('program.py', 'test/program.py')
    zip_file.write('lse.jpeg')
    print(*zip_file.namelist(), sep='\n')
```
Данный код добавит в архив два новых файла `program.py` и `lse.jpeg` в уже существующий архив `test.zip` и выведет:
```
test/
test/Картинки/
test/Картинки/1.jpg
test/Картинки/avatar.png
test/Картинки/certificate.png
test/Картинки/py.png
test/Картинки/World_Time_Zones_Map.png
test/Картинки/Снимок экрана.png
test/Неравенства.djvu
test/Программы/
test/Программы/image_util.py
test/Программы/sort.py
test/Разные файлы/
test/Разные файлы/astros.json
test/program.py
lse.jpeg
```
При этом  файл `program.py` добавлен в папку `test`, в то время как файл `lse.jpeg` добавлен в корень архива.

Вот новый архив на всякий случай:![[test_new.zip]]
