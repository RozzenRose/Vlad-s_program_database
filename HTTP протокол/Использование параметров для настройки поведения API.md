#http

Параметры API позволяют настраивать поведение запросов и ответов, обеспечивая гибкость и точность при взаимодействии с сервером. Они могут передаваться в URL, теле запроса или в заголовках. Рассмотрим, как использовать параметры для настройки поведения API и улучшения его функциональности.
### Параметры URL
Параметры URL передаются в строке запроса и используются для фильтрации, поиска и управления данными. Они включаются после знака вопроса (`?`) и состоят из пар "ключ-значение", разделенных амперсандом (`&`)
- **Пример использования:** Фильтрация пользователей по стране.
- **Пример запроса:**
```http
GET /api/users?country=USA HTTP/1.1
Host: api.example.com
```
Сервер обрабатывает параметр `country` и возвращает только пользователей из указанной страны.
### Параметры тела запроса
Параметры тела запроса передаются в теле `POST`, `PUT` или `PATCH`  запросов и используются для передачи данных, необходимых для создания или обновления ресурсов.
- **Пример использования:** Создание нового пользователя.
- **Пример тела запроса:**
```http
POST /api/users HTTP/1.1
Host: api.example.com
Content-Type: application/json

{
  "name": "John Doe",
  "email": "john.doe@example.com"
}
```
Сервер обрабатывает параметры `name` и `email` для создания нового пользователя.
### Параметры заголовков
Параметры заголовков передаются в заголовках **HTTP**-запросов и используются для передачи метаданных, таких как токены аутентификации, информация о содержимом и настройка кэширования
- **Пример использования:** Аутентификация с использованием токена.
- **Пример заголовка:**
```http
GET /api/protected-resource HTTP/1.1
Host: api.example.com
Authorization: Bearer your_token_here
```
Сервер обрабатывает заголовок `Authorization` для проверки токена и предоставления доступа к защищенному ресурсу.
### Практическое применение параметров API
Использование параметров API позволяет настраивать запросы для выполнения различных задач, таких как фильтрация данных, управления пагинацией и сортировкой, а также аутентификация и авторизация. Рассмотрим несколько примеров практического применения параметров API.
##### Фильтрация и поиск
Параметры фильтрации и поиска позволяют уточнять результаты запросов, улучшая эффективность взаимодействия с API.
```http
GET /api/products?category=electronics&search=smartphone HTTP/1.1
Host: api.example.com
```
Сервер возвращает продукты в категории «electronics», соответствующие ключевому слову «smartphone».
##### Пагинация
Параметры пагинации позволяют управлять размером и количеством страниц результатов, обеспечивая удобную навигацию и уменьшение нагрузки на сервер.
```http
GET /api/products?page=2&limit=10 HTTP/1.1
Host: api.example.com
```
Сервер возвращает вторую страницу результатов, содержащую 10 элементов.
##### Сортировка
Параметры сортировки позволяют упорядочивать результаты результаты по определенным критериям, улучшая представление данных для пользователей
```http
GET /api/products?sort=price&order=asc HTTP/1.1
Host: api.example.com
```
Сервер возвращает продукты, отсортированные по цене в порядке возрастания
### Обработка параметров API на сервере
Серверы обрабатывают параметры API для выполнения соответствующих действий, таких как фильтрация, поиск, сортировка и управление данными. Рассмотрим пример обработки параметров на сервере с использованием  Node.js и Express:
```javascript
const express = require('express');
const app = express();

app.get('/api/products', (req, res) => {
  const { category, search, page = 1, limit = 10, sort, order = 'asc' } = req.query;
  const products = getProducts({ category, search, page, limit, sort, order }); // Функция для получения продуктов
  res.json(products);
});

function getProducts({ category, search, page, limit, sort, order }) {
  // Пример функции для получения продуктов с фильтрацией, поиском и сортировкой
  let allProducts = [
    { name: 'Smartphone', category: 'electronics', price: 299 },
    { name: 'Laptop', category: 'electronics', price: 899 }
  ];
  // Фильтрация
  if (category) {
    allProducts = allProducts.filter(product => product.category === category);
  }
  // Поиск
  if (search) {
    allProducts = allProducts.filter(product => product.name.toLowerCase().includes(search.toLowerCase()));
  }
  // Сортировка
  if (sort) {
    allProducts = allProducts.sort((a, b) => (order === 'asc' ? a[sort] - b[sort] : b[sort] - a[sort]));
  }
  // Пагинация
  const start = (page - 1) * limit;
  const end = start + limit;
  return allProducts.slice(start, end);
}

app.listen(3000, () => {
  console.log('Server is running on port 3000');
});
```