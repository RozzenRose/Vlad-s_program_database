#docker #проброс_портов #постоянное_хранение_данных
### Запуск определенных версий
Тег указывается чрез `:`, в случае, если тег не указан, **docker** попытается найти последнюю версию, то есть образ с тегом **latest**
![[Pasted image 20241111134210.png]]
### Запуск с поддержкой псевдо терминала
`docker run -t имя`
Псевдо терминал - штука, которая позволяет осуществлять консольный ввод внутрь приложения контейнера, но не связывает его ввод псевдо терминала с обычным терминалом. Их `stdin`ы не связаны. То есть все что будет введено в терминал, не попадет внутрь терминала приложения в контейнере
### Запуск в интерактивном режиме
`docker run -it имя`
В интерактивном режиме `stdin` терминала и псевдо терминала будут объединены и мы сможем через свой терминал вводить данные и команды и в терминал приложения в контейнере
### Проброс портов в контейнер
`docker run -p внешний порт:внутренний порт`
`webapp` в примере слушает на порту `:5000`, чтобы получить к нему доступ, необходимо обратится к `ip` docker-контейнера и порту `5000`, в примере `ip` контейнера `172.17.0.2`. В таком виде доступно это приложение будет только с хоста докер-контейнера, то есть с компа, на котором все это крутится

Для того, что бы получить доступ к приложения извне нужно привязать внешний порт к внутреннему и обращаться извне к этому приложению нужно будет через `ip` хоста + внешний порт, в этом примере `ip` хоста `10.0.0.13`
![[Pasted image 20241111142037.png]]

### Постоянное хранение данных
`docker run -v имя директории для постоянного хранения:сохраняемой директории`
Сами по себе контейнеры умеют хранить данные. Но в случае удаления контейнера мы потеряем все данные, которые на этом контейнере хранились. Что вообще фатально, если такой контейнер содержал базу данных, например. Поэтому имеет смысл намутить бекап

В этом примере мы как бы связываем две директории, одну на хосте `/opt.datadir`, а вторую внутри контейнера `/var/lib/mysql`

При такой настройке, при запуске контейнера, контейнер он перетащит все данные с хоста в свою директорию, а при дальнейших изменениях во время работы будет обновлять данные внутри себя и на хосте
![[Pasted image 20241111143855.png]]

