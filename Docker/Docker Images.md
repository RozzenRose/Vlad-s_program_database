#docker 

![[Pasted image 20250507171846.png]]
**Docker Images** - это неизменяемые (**immutable**) шаблоны, используемые для создания контейнеров **Docker**. Можно представить их как "снимки" файловой системы, содержащие все необходимые файлы и инструкции для запуска приложения. Образ - это статический объект, который не меняется после создания.

**Что содержит Docker Image:**
- **Файлы системы:** Все файлы, необходимые для работы приложения (библиотеки, скрипты, конфигурационные файлы и т.д.).
- **Метаданные:** Информация о образе, например, имя, версия, размер, и теги.
- **Инструкции для запуска:** Информация о том, как запустить приложение внутри контейнера (команда  `CMD` в  `Dockerfile`).

![[Pasted image 20250507140646.png]]

### Использование **Docker Images**
- Мы можем легко и эффективно запускать контейнеры с помощью образов.
- Весь код, настройки конфигурации, переменные среды, библиотеки и время выполнения включены в образ Docker.
- Образы Docker не зависят от платформы.
- Слои являются строительными блоками.
- При использовании команды сборки у пользователя есть возможность полностью начать с нуля или использовать существующий образ.
### Разница между Docker Image и Docker Container

| Образ Docker                                                                    | Контейнер Docker                                                                   |
| ------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- |
| Образ Docker является исходным кодом контейнера Docker.                         | Контейнер Docker является экземпляром образа Docker.                               |
| Dockerfile является обязательным условием для образа Docker.                    | Образ Docker является предварительным условием для контейнера Docker.              |
| Образы Docker могут быть переданы пользователям с помощью реестра Docker.       | Контейнеры Docker не могут быть разделены между пользователями.                    |
| Чтобы внести изменения в образ Docker, нам нужно внести изменения в Dockerfile. | Мы можем напрямую взаимодействовать с контейнером и вносить необходимые изменения. |
### Структура Образа Docker
Слои программного обеспечения, которые составляют образ Docker, облегчают настройку зависимостей, необходимых для выполнения контейнера.
- **Базовый образ**: Базовый образ будет отправной точкой для большинства Dockerfiles, и его можно сделать с нуля.
- **Родительский образ**: Родительский образ - это образ, на котором основан наш образ. Мы можем ссылаться на родительский образ в Dockerfile с помощью команды `FROM`, и каждое объявление после этого влияет на родительский образ.
- **Слои**: Образы Docker имеют множество слоев. Чтобы создать последовательность промежуточных образов, каждый слой создается поверх предыдущего.
- **Реестр Docker**: Это система для хранения и распространения образов Docker с определенными именами. Может быть несколько версий одного и того же образа, каждая со своим собственным набором тегов. Реестр Docker разделен на репозитории Docker, в каждом из которых хранятся все модификации образа.

Перед тем, как создать образ **Docker** нам необходимо написать **Dockerfile**
![[Pasted image 20250507171405.png]]
Образы обычно создаются с помощью **Dckerfile**. Это текстовый файл, содержащий инструкции для создания образа. Каждая строка в **Dockerfile** создает новый слой в образе.
```text
FROM ubuntu:latest # Базовый образ
RUN apt-get update && apt-get install -y nginx # Установка пакета nginx
COPY ./nginx.conf /etc/nginx/sites-available/default # Копирование файла конфигурации
CMD ["nginx", "-g", "daemon off;"] # Команда для запуска nginx
```
Команда `docker build` использует **Dockerfile** для создания образа.

Образ - это шаблон. Контейнер - это запущенный экземпляр образа. Когда вы запускаете контейнер, **Docker** использует образ для создания файловой системы контейнера. Изменения, внесенные в контейнер во время его работы, не влияют на образ. Это важно, потому что образы неизменяемые.