#docker 

- #### [[Dockerfile для приложения Python]]
- #### [[Сборка образа для FastAPI приложения]]

![[Pasted image 20250624164523.png]]
Сборка **Docker Image** - это процесс создания образа, содержащего все необходимые файлы и инструкции для запуска приложения в контейнере. Этот процесс использует **Dockerfile**, который является списком команд, определяющих. как скомпилировать и подготовить приложение для работы в **Docker** контейнере. (Статья про [[Dockerfile]])

Используйте команду `docker build` для начала процесса сборки. Это команда принимает несколько аргументов, но ключевым является `context`
```php-template
docker build -t <имя_образа>:<тег> .
```
- `<имя_образа>`: Имя, которое вы дадите вашему образу (например, `my-app`).
- `<тег>`: Тег, который вы дадите образу (например, `latest`, `v1.0`).
- `.` (точка): указывает, что Docker должен использовать текущую директорию как контекст сборки. Если Dockerfile находится в другом месте, укажите путь к нему. Например, `docker build -t my-image:latest ./my-app/`
#### Использование нескольких `Dockerfile`
Использование нескольких `Dockerfile` — распространённая практика, особенно при работе с большими проектами, где одно `Dockerfile` может стать слишком громоздким и сложным для обслуживания. Несколько `Dockerfile` могут использоваться в разных сценариях, и каждый подход имеет свои плюсы и минусы.
#### Исключение файлов из сборки `.dockerignore`
Файл `.dockerignore` используется для исключения файлов и директорий из контекста сборки **Docker**. Это важно по нескольким причинам:
- **Уменьшение размера контекста:** Исключение ненужных файлов уменьшает размер контекста сборки, что ускоряет процесс сборки. Чем меньше файлов передаётся на Docker Daemon, тем быстрее будет построение образа.
- **Безопасность:** Некоторые файлы, такие как ключи, пароли или конфиденциальные данные, не должны включаться в образ. `.dockerignore` гарантирует, что такие файлы не попадут в образ.
- **Улучшение повторяемости:** Исключение временных или генерируемых файлов делает процесс сборки более воспроизводимым.

**Синтаксис `.dockerignore`**:
Файл `.dockerignore` используйте простой синтаксис, основанный на шаблонах:
- **Директивы:** Каждая строка в `.dockerignore` представляет собой шаблон, который определяет, какие файлы или директории следует исключить.
- **Шаблоны:** Шаблоны могут содержать подстановочные знаки:
    - `*`: Соответствует любому количеству символов.
    - `?`: Соответствует одному символу.
    - `[]`: Соответствует одному из символов в квадратных скобках.
    - `!`: Исключает исключение.
- **Комментарии:** Строки, начинающиеся с `#`, игнорируются.
- **Пути:** Пути задаются относительно директории, в которой находится `.dockerignore`.

**Примеры:**
- `.DS_Store`: Исключает файлы .DS_Store (macOS).
- `node_modules`: Исключает директорию node_modules.
- `*.log`: Исключает все файлы с расширением .log.
- `/tmp/`: Исключает директорию /tmp (абсолютный путь).
- `build/`: Исключает директорию build.
- `!important.txt`: Исключает все кроме файла important.txt